<div class="cart-container">
    <div class="cart-title; bold">Shop</div>
    <ng-container *ngIf="this.cartService.totalQuantity() as totalQuantity; else randomButton">
        <button (click)="toggleCart()">{{isCartPopupOpen?'Close Cart':'Open Cart'}}
            ({{totalQuantity}}/${{this.cartService.totalCost()}})</button>
        <button (click)="clearCart()" class="red-button">Clear Cart</button>
    </ng-container>
    <ng-template #randomButton>
        <button (click)="buyRandom()" class="random-button">Buy something random to make the cart appear!</button>
    </ng-template>
</div>
<div *ngIf="isCartPopupOpen" class="overlay">
    <div class="popup-container">Total: ${{this.cartService.totalCost()}}
        <ng-container *ngFor="let item of cartItems | keyvalue" class="cart-title">
            <p class="centered-text">{{item.key}}</p>
            <app-cart-item *ngFor="let product of item.value | keyvalue; trackBy : trackProductByName"
                [product]="product.key" [quantity]="product.value" (remove)="onRemoveItem($event)">
            </app-cart-item>
        </ng-container>
    </div>
</div>